<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Memorama Nutricional</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a, #064e3b);
            min-height: 100vh;
        }

        .game-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            justify-items: center;
        }

        .card-memo {
            width: 100px;
            height: 100px;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: transform 0.3s;
            transform-style: preserve-3d;
            position: relative;
        }

        .card-memo.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.75rem;
        }

        .card-front {
            background: #22c55e;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #f9fafb;
            font-weight: 700;
            font-size: 1.5rem;
            border: 2px solid #16a34a;
            box-shadow: 0 10px 20px rgba(0,0,0,0.25);
        }

        .card-back {
            transform: rotateY(180deg);
            border: 2px solid #0ea5e9;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.25);
        }

        .card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.5);
        }
    </style>
</head>
<body class="text-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-opacity-75">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                üß† NutriMemorama
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMemorama" aria-controls="navbarMemorama" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarMemorama">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Juego</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#tips">Tips saludables</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#beneficios">Beneficios</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="py-5">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-lg-7">
                    <div class="card glass-card text-light shadow-lg border-0 rounded-4">
                        <div class="card-body p-4 p-md-5">
                            <h1 class="display-5 fw-bold mb-3">
                                Memorama de <span class="text-success">Salud Nutricional</span> ü•¶
                            </h1>
                            <p class="lead mb-3">
                                Entrena tu memoria mientras recuerdas la importancia de una buena alimentaci√≥n.
                                Cada partida es una oportunidad para pensar en h√°bitos saludables.
                            </p>
                            <div class="d-flex flex-wrap gap-2 mb-3">
                                <span class="badge bg-success rounded-pill">Frutas y verduras</span>
                                <span class="badge bg-info rounded-pill">Hidrataci√≥n</span>
                                <span class="badge bg-warning text-dark rounded-pill">Energ√≠a saludable</span>
                                <span class="badge bg-primary rounded-pill">H√°bitos diarios</span>
                            </div>
                            <p class="mb-0 small text-secondary">
                                Consejo: As√≠ como recuerdas las cartas, tu cuerpo ‚Äúrecuerda‚Äù lo que comes todos los d√≠as.
                                Ll√©nalo de colores: verde (verduras), rojo (frutas), caf√© (fibra), blanco (agua).
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5" id="beneficios">
                    <div class="card glass-card text-light shadow-lg border-0 rounded-4 h-100">
                        <div class="card-body p-4">
                            <h5 class="fw-bold mb-3">Beneficios de una buena nutrici√≥n</h5>
                            <ul class="list-group list-group-flush list-group-numbered">
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Mejora tu concentraci√≥n y memoria en clase.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Te da energ√≠a para hacer deporte y tus actividades diarias.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Refuerza tu sistema inmunol√≥gico para enfermarte menos.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Ayuda a mantener un peso saludable y sentirte mejor contigo mismo.
                                </li>
                            </ul>
                            <p class="small text-secondary mt-3 mb-0">
                                Si cuidas lo que comes hoy, tu cuerpo te lo agradece ma√±ana.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="pb-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-8">
                    <div class="card glass-card shadow-lg border-0 rounded-4">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h2 class="h4 mb-0">Juego de Memoria</h2>
                                <button class="btn btn-outline-light btn-sm" onclick="restartGame()">
                                    üîÑ Reiniciar
                                </button>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <span class="me-2">Aciertos:</span>
                                        <span class="badge bg-success" id="counter">0</span>
                                        <span class="text-secondary">/ <span id="total"></span></span>
                                    </div>
                                    <small class="text-secondary">Encuentra todas las parejas para ganar üéØ</small>
                                </div>
                                <div class="progress mt-2" style="height: 12px;">
                                    <div id="progressBar" class="progress-bar bg-success" role="progressbar" style="width: 0%;" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>

                            <div class="game-container" id="gameContainer"></div>

                            <div class="mt-3 text-center">
                                <div class="message" id="message"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tips -->
                <div class="col-lg-4" id="tips">
                    <div class="card glass-card shadow-lg border-0 rounded-4 h-100">
                        <div class="card-body p-4">
                            <h5 class="fw-bold mb-3">Tips de salud nutricional üçé</h5>
                            <ul class="list-group list-group-flush small">
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Bebe al menos 6‚Äì8 vasos de agua al d√≠a üíß.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Llena la mitad de tu plato con frutas y verduras de colores ü•ïü•¨.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Prefiere alimentos frescos sobre los ultra procesados ü•ó.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    No te saltes el desayuno, te ayuda a rendir mejor en la escuela ‚òÄÔ∏è.
                                </li>
                                <li class="list-group-item bg-transparent text-light border-secondary">
                                    Combina buena alimentaci√≥n con sue√±o suficiente y movimiento diario üèÉ‚Äç‚ôÇÔ∏è.
                                </li>
                            </ul>
                            <p class="small text-secondary mt-3 mb-0">
                                ‚ÄúSi alimentas bien tu cuerpo, tu mente tambi√©n juega mejor.‚Äù
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="winModal" tabindex="-1" aria-labelledby="winModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title" id="winModalLabel">üéâ ¬°Felicidades!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    Has encontrado todas las parejas del memorama.<br>
                    As√≠ como ejercitas tu memoria, recuerda ejercitar tambi√©n tus h√°bitos de alimentaci√≥n saludable.
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-success" onclick="restartGame(); bootstrap.Modal.getInstance(document.getElementById('winModal')).hide();">
                        Jugar de nuevo üîÑ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>

        const images = {{ images|tojson }};

        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;

        const totalPairs = images.length;
        const counterSpan = document.getElementById('counter');
        const totalSpan = document.getElementById('total');
        const messageDiv = document.getElementById('message');
        const gameContainer = document.getElementById('gameContainer');
        const progressBar = document.getElementById('progressBar');

        totalSpan.textContent = totalPairs;

        function initGame() {
            // Reset
            cards = [...images, ...images];
            flippedCards = [];
            matchedPairs = 0;
            counterSpan.textContent = matchedPairs;
            messageDiv.textContent = '';
            progressBar.style.width = '0%';

            cards.sort(() => Math.random() - 0.5);

            gameContainer.innerHTML = '';

            cards.forEach((img, index) => {
                const card = document.createElement('div');
                card.className = 'card-memo';
                card.innerHTML = `
                    <div class="card-front">
                        ?
                    </div>
                    <div class="card-back">
                        <img src="${img}" alt="card">
                    </div>
                `;
                card.dataset.index = index;
                card.addEventListener('click', flipCard);
                gameContainer.appendChild(card);
            });
        }

        function updateProgress() {
            const percent = (matchedPairs / totalPairs) * 100;
            progressBar.style.width = percent + '%';
        }

        function flipCard() {
            if (flippedCards.length === 2) return;
            if (this.classList.contains('flipped')) return;

            this.classList.add('flipped');
            flippedCards.push(this);

            if (flippedCards.length === 2) {
                setTimeout(checkMatch, 700);
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            const isMatch = cards[card1.dataset.index] === cards[card2.dataset.index];

            if (isMatch) {
                matchedPairs++;
                counterSpan.textContent = matchedPairs;
                updateProgress();

                card1.removeEventListener('click', flipCard);
                card2.removeEventListener('click', flipCard);

                if (matchedPairs === totalPairs) {
                    messageDiv.textContent = '¬°Felicidades! Has ganado el juego üéâ';
                    const modal = new bootstrap.Modal(document.getElementById('winModal'));
                    modal.show();
                }
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
            }

            flippedCards = [];
        }

        function restartGame() {
            initGame();
        }

        document.addEventListener('DOMContentLoaded', initGame);
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>

